<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Dr.L.: /tmp/drl/cpp/math/dimred/ya_dim_reduce.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>/tmp/drl/cpp/math/dimred/ya_dim_reduce.h</h1><a href="ya__dim__reduce_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/***************************************************************************</span>
00002 <span class="comment">                               ya_dim_reduce.h</span>
00003 <span class="comment">                             -------------------</span>
00004 <span class="comment">                               W. Michael Brown</span>
00005 <span class="comment"></span>
00006 <span class="comment">  Pure Base Class for Dimensionality Reduction</span>
00007 <span class="comment"></span>
00008 <span class="comment"> __________________________________________________________________________</span>
00009 <span class="comment">    This file is part of the Dr.L. Library</span>
00010 <span class="comment"> __________________________________________________________________________</span>
00011 <span class="comment"></span>
00012 <span class="comment">    begin      : Wed Jun 7 2006</span>
00013 <span class="comment">    authors    : W. Michael Brown</span>
00014 <span class="comment">    email      : wmbrown@sandia.gov</span>
00015 <span class="comment"> ***************************************************************************/</span>
00016 
00017 <span class="comment">/* -----------------------------------------------------------------------</span>
00018 <span class="comment">   Copyright (2009) Sandia Corporation.  Under the terms of Contract</span>
00019 <span class="comment">   DE-AC04-94AL85000 with Sandia Corporation, the U.S. Government retains</span>
00020 <span class="comment">   certain rights in this software.  This software is distributed under </span>
00021 <span class="comment">   the GNU General Public License.</span>
00022 <span class="comment">   ----------------------------------------------------------------------- */</span>
00023 
00026 <span class="preprocessor">#ifndef YA_DIM_REDUCE_H</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#define YA_DIM_REDUCE_H</span>
00028 <span class="preprocessor"></span>
00029 YALANAMESPACE
00030 
00032 <span class="keyword">template</span> &lt;<span class="keyword">class</span> eltype&gt;
<a name="l00033"></a><a class="code" href="class_y_a_dim_reduce.html">00033</a> <span class="keyword">class </span><a class="code" href="class_y_a_dim_reduce.html">YADimReduce</a> {
00034  <span class="keyword">public</span>:
00035   <a class="code" href="class_y_a_dim_reduce.html">YADimReduce</a>() { _high_dim=0; _low_dim=0; num_neighbors=10; 
00036                   _neighbor_weight_mode=0; _neighbor_mode = 0; _verbose=2; }
00037   <span class="keyword">virtual</span> ~<a class="code" href="class_y_a_dim_reduce.html">YADimReduce</a>() {}
00038   
00040   <span class="keyword">virtual</span> <span class="keyword">const</span> string method_name() <span class="keyword">const </span>= 0;
00042   <span class="keyword">virtual</span> <span class="keyword">const</span> string method_id() <span class="keyword">const </span>= 0;
00044   <span class="keyword">virtual</span> <span class="keyword">const</span> string version() <span class="keyword">const </span>= 0;
00045 
00047 
00050   <span class="keyword">template</span> &lt;<span class="keyword">class</span> ya_type1, <span class="keyword">class</span> ya_type2&gt;
<a name="l00051"></a><a class="code" href="class_y_a_dim_reduce.html#a5">00051</a>   <span class="keywordtype">int</span> find_t(<span class="keyword">const</span> ya_type1 &amp;input, ya_type2 &amp;output, ya_sizet dim,
00052              EigenOptions &amp;eigopts)
00053     { YA_MatT ot; <span class="keywordtype">int</span> errf=find(input,ot,dim,eigopts); output=ot; <span class="keywordflow">return</span> errf;}
00055   <span class="keyword">template</span> &lt;<span class="keyword">class</span> ya_type1, <span class="keyword">class</span> ya_type2&gt;
<a name="l00056"></a><a class="code" href="class_y_a_dim_reduce.html#a6">00056</a>   <span class="keywordtype">void</span> forward_t(<span class="keyword">const</span> ya_type1 &amp;input, ya_type2 &amp;output)<span class="keyword"> const</span>
00057 <span class="keyword">    </span>{ YA_MatT ot; forward(input,ot); output=ot; }
00059   <span class="keyword">template</span> &lt;<span class="keyword">class</span> ya_type1, <span class="keyword">class</span> ya_type2&gt;
<a name="l00060"></a><a class="code" href="class_y_a_dim_reduce.html#a7">00060</a>   <span class="keywordtype">void</span> reverse_t(<span class="keyword">const</span> ya_type1 &amp;input, ya_type2 &amp;output)<span class="keyword"> const</span>
00061 <span class="keyword">    </span>{ YA_MatT ot; reverse(input,ot); output=ot; }
00062 
00064 
00067   <span class="keyword">virtual</span> <span class="keywordtype">int</span> find(<span class="keyword">const</span> YA_MatT &amp;input, YA_MatT &amp;output, ya_sizet dim,
00068                    EigenOptions &amp;eigopts) = 0;
00070   <span class="keyword">virtual</span> <span class="keywordtype">void</span> forward(<span class="keyword">const</span> YA_MatT &amp;input, YA_MatT &amp;output) <span class="keyword">const </span>= 0;
00072   <span class="keyword">virtual</span> <span class="keywordtype">void</span> reverse(<span class="keyword">const</span> YA_MatT &amp;input, YA_MatT &amp;output) <span class="keyword">const </span>= 0;
00073   
00075 
00077   <span class="keyword">template</span> &lt;<span class="keyword">class</span> ya_type1&gt;
00078   eltype reconstruct_error(<span class="keyword">const</span> ya_type1 &amp;input) <span class="keyword">const</span>;
00079     
00081   <span class="keywordtype">int</span> save_map(<span class="keyword">const</span> string filename) <span class="keyword">const</span>;
00083   <span class="keyword">virtual</span> <span class="keywordtype">void</span> save_map(ostream &amp;out) <span class="keyword">const </span>= 0;
00084   
00086 
00090   <span class="keywordtype">int</span> load_map(<span class="keyword">const</span> string filename);
00092   <span class="keyword">virtual</span> <span class="keywordtype">int</span> load_map(istream &amp;in) = 0;
00093 
00095 
<a name="l00096"></a><a class="code" href="class_y_a_dim_reduce.html#a16">00096</a>   <span class="keyword">inline</span> <span class="keywordtype">int</span> verbose() { <span class="keywordflow">return</span> _verbose; }
00098 
<a name="l00099"></a><a class="code" href="class_y_a_dim_reduce.html#a17">00099</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> verbose(<span class="keyword">const</span> <span class="keywordtype">int</span> v) { _verbose=v; }
00100 
<a name="l00102"></a><a class="code" href="class_y_a_dim_reduce.html#a18">00102</a>   <span class="keyword">inline</span> ya_sizet high_dim()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _high_dim; }
<a name="l00104"></a><a class="code" href="class_y_a_dim_reduce.html#a19">00104</a>   <span class="keyword">inline</span> ya_sizet low_dim()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _low_dim; }
<a name="l00106"></a><a class="code" href="class_y_a_dim_reduce.html#a20">00106</a>   <span class="keyword">const</span> YA_VecT &amp; eigenvalues()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> eigen_values; } 
00107 
<a name="l00109"></a><a class="code" href="class_y_a_dim_reduce.html#a21">00109</a>   ya_sizet neighbors()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> num_neighbors; }
<a name="l00111"></a><a class="code" href="class_y_a_dim_reduce.html#a22">00111</a>   <span class="keywordtype">void</span> neighbors(ya_sizet n) { num_neighbors=n; _neighbor_mode=0; }
00112 
<a name="l00114"></a><a class="code" href="class_y_a_dim_reduce.html#a23">00114</a>   eltype epsilon()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _epsilon; }
<a name="l00116"></a><a class="code" href="class_y_a_dim_reduce.html#a24">00116</a>   <span class="keywordtype">void</span> epsilon(eltype n) { 
00117     YA_DEBUG_ERROR(n&gt;0,<span class="stringliteral">"epsilon must be positive for LLE and IsoMap"</span>);
00118     _epsilon=n; _neighbor_mode=1; }
00119 
00121 
<a name="l00122"></a><a class="code" href="class_y_a_dim_reduce.html#a25">00122</a>   ya_sizet neighbor_mode()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _neighbor_mode; }
00124 
<a name="l00127"></a><a class="code" href="class_y_a_dim_reduce.html#a26">00127</a>   <span class="keywordtype">void</span> neighbor_mode(ya_sizet n) { 
00128     YA_DEBUG_ERROR(n==0 || n==1,<span class="stringliteral">"Invalid neighbor_mode for LLE/IsoMap"</span>);
00129     _neighbor_mode=n; }
00131 
<a name="l00132"></a><a class="code" href="class_y_a_dim_reduce.html#a27">00132</a>   <span class="keyword">inline</span> ya_sizet neighbor_weight_mode()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _neighbor_weight_mode; }
00134 
<a name="l00139"></a><a class="code" href="class_y_a_dim_reduce.html#a28">00139</a>   <span class="keywordtype">void</span> neighbor_weight_mode(<span class="keyword">const</span> ya_sizet t) { _neighbor_weight_mode=t; }
00140 
00142   <span class="keyword">template</span> &lt;<span class="keyword">class</span> vm_type&gt;
<a name="l00143"></a><a class="code" href="class_y_a_dim_reduce.html#a29">00143</a>   <span class="keywordtype">void</span> ae_layers(<span class="keyword">const</span> vm_type &amp;in)
00144     { ate_layers=reshape(in,1,in.numel()); _low_dim=in(in.numel()-1); }
<a name="l00146"></a><a class="code" href="class_y_a_dim_reduce.html#a30">00146</a>   <span class="keyword">const</span> YA_MatT &amp; rbm_errors()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> rbm_error; }
<a name="l00148"></a><a class="code" href="class_y_a_dim_reduce.html#a31">00148</a>   <span class="keyword">const</span> YA_MatT &amp; bp_errors()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> bp_error; }
00149 
00151 
00153   <span class="keyword">template</span> &lt;<span class="keyword">class</span> vm_type, <span class="keyword">class</span> ya_type2&gt;
00154   <span class="keywordtype">int</span> nbors_forward(<span class="keyword">const</span> vm_type &amp;in, ya_type2 &amp;out) <span class="keyword">const</span>;
00156 
00158   <span class="keyword">template</span> &lt;<span class="keyword">class</span> vm_type, <span class="keyword">class</span> ya_type2&gt;
00159   <span class="keywordtype">int</span> nbors_reverse(<span class="keyword">const</span> vm_type &amp;in, ya_type2 &amp;out) <span class="keyword">const</span>;
00160   
00162 
00163   <span class="keyword">template</span> &lt;<span class="keyword">class</span> vm_type, <span class="keyword">class</span> ya_type2&gt;
00164   <span class="keywordtype">int</span> nbors_forward(<span class="keyword">const</span> vm_type &amp;in, <span class="keyword">const</span> ya_sizet dim,ya_type2 &amp;out) <span class="keyword">const</span>;
00166 
00167   <span class="keyword">template</span> &lt;<span class="keyword">class</span> vm_type, <span class="keyword">class</span> ya_type2&gt;
00168   <span class="keywordtype">int</span> nbors_reverse(<span class="keyword">const</span> vm_type &amp;in, <span class="keyword">const</span> ya_sizet dim,ya_type2 &amp;out) <span class="keyword">const</span>;
00169 
00171   <span class="keyword">template</span> &lt;<span class="keyword">class</span> mat_type&gt;
00172   <span class="keywordtype">void</span> double_center(YA_BaseT &amp;mat);
00173  <span class="keyword">protected</span>:
00174   <span class="keyword">template</span> &lt;<span class="keyword">class</span> vm_type, <span class="keyword">class</span> ya_type2, <span class="keyword">class</span> ya_type3, <span class="keyword">class</span> ya_type4&gt;
00175   <span class="keywordtype">void</span> lle_weights(<span class="keyword">const</span> vm_type &amp;input,<span class="keyword">const</span> ya_type2 &amp;kinput,<span class="keyword">const</span> ya_sizet k,
00176                    ya_type3 &amp;neighbors, ya_type4 &amp;weights, 
00177                    <span class="keyword">const</span> <span class="keywordtype">bool</span> samemat) <span class="keyword">const</span>;
00178   <span class="keyword">template</span> &lt;<span class="keyword">class</span> vm_type, <span class="keyword">class</span> ya_type2&gt;
00179   <span class="keywordtype">void</span> lle_weightse(<span class="keyword">const</span> vm_type &amp;input,<span class="keyword">const</span> ya_type2 &amp;kinput,
00180                     <span class="keyword">const</span> eltype epsilon, vector&lt;YA_DynI&gt; &amp;neighbors, 
00181                     vector&lt;YA_DynT&gt; &amp;weights, <span class="keyword">const</span> <span class="keywordtype">bool</span> samemat) <span class="keyword">const</span>;
00182   <span class="keyword">template</span> &lt;<span class="keyword">class</span> vm_type, <span class="keyword">class</span> ya_type2, <span class="keyword">class</span> ya_type3, <span class="keyword">class</span> ya_type4&gt;
00183   <span class="keywordtype">void</span> dist_weights(<span class="keyword">const</span> vm_type &amp;input,<span class="keyword">const</span> ya_type2 &amp;kinput,
00184                     <span class="keyword">const</span> ya_sizet k, ya_type3 &amp;neighbors, 
00185                     ya_type4 &amp;weights) <span class="keyword">const</span>;
00186   <span class="keyword">template</span> &lt;<span class="keyword">class</span> vm_type, <span class="keyword">class</span> ya_type2&gt;
00187   <span class="keywordtype">void</span> dist_weightse(<span class="keyword">const</span> vm_type &amp;input,<span class="keyword">const</span> ya_type2 &amp;kinput,
00188                      <span class="keyword">const</span> eltype epsilon, vector&lt;YA_DynI&gt; &amp;nbors, 
00189                      vector&lt;YA_DynT&gt; &amp;weights) <span class="keyword">const</span>;
00190   <span class="keywordtype">void</span> write_header(ostream &amp;out) <span class="keyword">const</span>;
00191   <span class="keywordtype">int</span> read_header(istream &amp;in);
00192   ya_sizet _high_dim;
00193   ya_sizet _low_dim;
00194   YA_VecT eigen_values;
00195   <span class="comment">// LLE and IsoMap</span>
00196   ya_sizet num_neighbors;
00197   eltype _epsilon;
00198   ya_sizet _neighbor_mode; <span class="comment">// 0 for nearest neighbors, 1 for epsilon</span>
00199   ya_sizet _neighbor_weight_mode;   <span class="comment">// true if LLE weights are used, false if distances</span>
00200   <span class="comment">// AutoEncoder</span>
00201   YA_RowI ate_layers;
00202   YA_MatT rbm_error,bp_error;
00203   YA_MatT input_coords,output_coords;
00204   <span class="comment">// Degree of routine output to console (0 off, 1 progmeter, 2 neighbor stats)</span>
00205   <span class="keywordtype">int</span> _verbose;
00206 };
00207 
00208 }
00209 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri Jun 5 11:11:49 2009 for Dr.L. by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
